(this.webpackJsonpfinancial_news_frontend=this.webpackJsonpfinancial_news_frontend||[]).push([[0],{186:function(e,t,a){},188:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(8),o=a.n(c),i=(a(90),a(26)),l=a.n(i),s=a(41),u=a(42),d=a(10),m=a(75),p=(a(186),a(19));function f(e){return e.reduce((function(e,t){var a=new Date(t.date).toDateString(),n=e.get(a)||[];return e.set(a,[].concat(Object(p.a)(n),[t])),e}),new Map)}function b(e){var t=e.reduce((function(e,t){return e.score+=t.sentimentResult.score,e.magnitude+=t.sentimentResult.magnitude,e}),{score:0,magnitude:0});return{data:e,sentiment:{score:t.score/e.length,magnitude:t.magnitude/e.length}}}function h(e){var t=new URL("https://us-central1-df-side-projects.cloudfunctions.net/news-rss-http"),a=new Date(e.toLocaleDateString());return t.searchParams.append("fromDateString",a.toISOString()),t}function g(){return v.apply(this,arguments)}function v(){return(v=Object(u.a)(l.a.mark((function e(){var t,a,n,r,c,o,i,u,m,p,g,v,w,E,j,O,S,x=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=x.length>0&&void 0!==x[0]?x[0]:new Date,e.prev=1,a=h(t),e.next=5,fetch(a.toString());case 5:if(200===(n=e.sent).status){e.next=9;break}throw new Error("Unexpected status code: ".concat(n.status));case 9:return e.next=11,n.json();case 11:for(r=e.sent,c=r.results,o=f(c),i=[],u=!0,m=!1,p=void 0,e.prev=18,g=o.entries()[Symbol.iterator]();!(u=(v=g.next()).done);u=!0)w=Object(d.a)(v.value,2),E=w[0],j=w[1],O=b(j),S=new Date(E),i.push(Object(s.a)({},O,{date:S}));e.next=26;break;case 22:e.prev=22,e.t0=e.catch(18),m=!0,p=e.t0;case 26:e.prev=26,e.prev=27,u||null==g.return||g.return();case 29:if(e.prev=29,!m){e.next=32;break}throw p;case 32:return e.finish(29);case 33:return e.finish(26);case 34:return i.sort((function(e,t){return e.date.getTime()-t.date.getTime()})),e.abrupt("return",i);case 38:throw e.prev=38,e.t1=e.catch(1),console.error("error happened: ".concat(e.t1)),e.t1;case 42:case"end":return e.stop()}}),e,null,[[1,38],[18,22,26,34],[27,,29,33]])})))).apply(this,arguments)}var w=a(224),E=a(230),j=a(233),O=a(227),S=a(229),x=a(231),D=a(232),k=a(239),N=a(238),y=Object(w.a)({table:{minWidth:650},text:{color:"white"},link:{color:"white"}});function R(e){var t=e.result,a=y();if(!t)return null;var n=function(e){return r.a.createElement(O.a,{className:a.text,align:"left"},e)};return r.a.createElement(S.a,null,r.a.createElement(E.a,{className:a.table,"aria-label":"simple table"},r.a.createElement(x.a,null,r.a.createElement(D.a,null,["Title","Date","Summary","Sentiment"].map((function(e){return n(e)})))),r.a.createElement(j.a,null,t.data.map((function(e){var t,c=new Date(e.date);return r.a.createElement(D.a,{key:e.link},r.a.createElement(O.a,{component:"th",scope:"row",className:a.text},r.a.createElement(N.a,{href:e.link},e.title)),n(c.toLocaleString()),n(e.contentSnippet),r.a.createElement(k.a,{title:e.sentimentResult.score.toFixed(3),placement:"left"},n((t=e.sentimentResult.score)>0?"\ud83d\udc4d":t<0?"\ud83d\udc4e":"\ud83e\udd14")))})))))}var B=a(240),C=a(236),L=Object(w.a)((function(e){return Object(B.a)({container:{display:"flex",flexWrap:"wrap"},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:200},label:{color:"white"},input:{color:"white"}})}));function T(e){var t=e.selectedDate,a=e.updateDate,c=Object(n.useState)(!1),o=Object(d.a)(c,2),i=o[0],l=o[1],s=L();return r.a.createElement(C.a,{id:"date",label:"Start Date",type:"date",defaultValue:t.toLocaleDateString(),className:s.textField,onChange:function(e){var t=e.target.value,n=new Date(t);isNaN(n.getTime())?l(!0):(l(!1),a(n))},error:i,InputLabelProps:{shrink:!0,className:s.label},InputProps:{className:s.input}})}var W=a(235),F={label:"News sentiment",fill:!1,lineTension:.1,backgroundColor:"rgba(75,192,192,0.4)",borderColor:"rgba(75,192,192,1)",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",pointBorderColor:"rgba(75,192,192,1)",pointBackgroundColor:"#fff",pointBorderWidth:1,pointHoverRadius:5,pointHoverBackgroundColor:"rgba(75,192,192,1)",pointHoverBorderColor:"rgba(220,220,220,1)",pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:10},H=function(){var e=Object(n.useState)(null),t=Object(d.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(null),i=Object(d.a)(o,2),p=i[0],f=i[1],b=Object(n.useState)({labels:[],datasets:[]}),h=Object(d.a)(b,2),v=h[0],w=h[1],E=Object(n.useState)(new Date),j=Object(d.a)(E,2),O=j[0],S=j[1],x=function(e,t){var a=Object(n.useState)(e),r=Object(d.a)(a,2),c=r[0],o=r[1];return Object(n.useEffect)((function(){var a=setTimeout((function(){o(e)}),t);return function(){return clearTimeout(a)}}),[e,t]),c}(O,1e3);Object(n.useEffect)((function(){Object(u.a)(l.a.mark((function e(){var t,a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(x);case 2:t=e.sent,a=t.map((function(e){return e.date.toLocaleDateString()})),n=t.map((function(e){return e.sentiment.score})),c(t),w({labels:a,datasets:[Object(s.a)({},F,{data:n})]});case 7:case"end":return e.stop()}}),e)})))()}),[x]);var D=a&&null!==p?a[p]:null;return r.a.createElement("div",{className:"App App-header"},r.a.createElement("header",null,"Financial News"),a?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"picker"},r.a.createElement(T,{selectedDate:x,updateDate:S})),r.a.createElement("div",{className:"graph"},r.a.createElement(m.a,{data:v,getElementAtEvent:function(e){return function(e){if(0!==e.length){var t=e[0]._index;f(t)}}(e)}}))):r.a.createElement(W.a,{className:"loader"}),r.a.createElement("div",{className:"table"},r.a.createElement(R,{result:D})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(H,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},85:function(e,t,a){e.exports=a(188)},90:function(e,t,a){}},[[85,1,2]]]);
//# sourceMappingURL=main.2611623b.chunk.js.map