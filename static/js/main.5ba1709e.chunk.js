(this.webpackJsonpfinancial_news_frontend=this.webpackJsonpfinancial_news_frontend||[]).push([[0],{186:function(e,t,n){},188:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(8),o=n.n(c),i=(n(90),n(26)),s=n.n(i),l=n(41),u=n(42),d=n(10),m=n(75),f=(n(186),n(19));function p(e){return e.reduce((function(e,t){var n=new Date(t.date).toDateString(),a=e.get(n)||[];return e.set(n,[].concat(Object(f.a)(a),[t])),e}),new Map)}function b(e){var t=e.reduce((function(e,t){return e.score+=t.sentimentResult.score,e.magnitude+=t.sentimentResult.magnitude,e}),{score:0,magnitude:0});return{data:e,sentiment:{score:t.score/e.length,magnitude:t.magnitude/e.length}}}function h(e){var t=new URL("https://us-central1-df-side-projects.cloudfunctions.net/news-rss-http");return t.searchParams.append("fromDateString",e.toISOString()),t}function v(){return g.apply(this,arguments)}function g(){return(g=Object(u.a)(s.a.mark((function e(){var t,n,a,r,c,o,i,u,m,f,v,g,w,E,j,O,S,x=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=x.length>0&&void 0!==x[0]?x[0]:new Date,e.prev=1,n=h(t),e.next=5,fetch(n.toString());case 5:if(200===(a=e.sent).status){e.next=9;break}throw new Error("Unexpected status code: ".concat(a.status));case 9:return e.next=11,a.json();case 11:for(r=e.sent,c=r.results,o=p(c),i=[],u=!0,m=!1,f=void 0,e.prev=18,v=o.entries()[Symbol.iterator]();!(u=(g=v.next()).done);u=!0)w=Object(d.a)(g.value,2),E=w[0],j=w[1],O=b(j),S=new Date(E),i.push(Object(l.a)({},O,{date:S}));e.next=26;break;case 22:e.prev=22,e.t0=e.catch(18),m=!0,f=e.t0;case 26:e.prev=26,e.prev=27,u||null==v.return||v.return();case 29:if(e.prev=29,!m){e.next=32;break}throw f;case 32:return e.finish(29);case 33:return e.finish(26);case 34:return i.sort((function(e,t){return e.date.getTime()-t.date.getTime()})),e.abrupt("return",i);case 38:throw e.prev=38,e.t1=e.catch(1),console.error("error happened: ".concat(e.t1)),e.t1;case 42:case"end":return e.stop()}}),e,null,[[1,38],[18,22,26,34],[27,,29,33]])})))).apply(this,arguments)}var w=n(224),E=n(230),j=n(233),O=n(227),S=n(229),x=n(231),D=n(232),k=n(239),N=n(238),y=Object(w.a)({table:{minWidth:650},text:{color:"white"},link:{color:"white"}});function R(e){var t=e.result,n=y();if(!t)return null;var a=function(e){return r.a.createElement(O.a,{className:n.text,align:"left"},e)};return r.a.createElement(S.a,null,r.a.createElement(E.a,{className:n.table,"aria-label":"simple table"},r.a.createElement(x.a,null,r.a.createElement(D.a,null,["Title","Date","Summary","Sentiment"].map((function(e){return a(e)})))),r.a.createElement(j.a,null,t.data.map((function(e){var t,c=new Date(e.date);return r.a.createElement(D.a,{key:e.link},r.a.createElement(O.a,{component:"th",scope:"row",className:n.text},r.a.createElement(N.a,{href:e.link},e.title)),a(c.toLocaleString()),a(e.contentSnippet),r.a.createElement(k.a,{title:e.sentimentResult.score.toFixed(3),placement:"left"},a((t=e.sentimentResult.score)>0?"\ud83d\udc4d":t<0?"\ud83d\udc4e":"\ud83e\udd14")))})))))}var B=n(240),C=n(236),T=Object(w.a)((function(e){return Object(B.a)({container:{display:"flex",flexWrap:"wrap"},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:200}})}));function L(e){var t=e.selectedDate,n=e.updateDate,c=Object(a.useState)(!1),o=Object(d.a)(c,2),i=o[0],s=o[1],l=T();return r.a.createElement(C.a,{id:"date",label:"Start Date",type:"date",defaultValue:t.toLocaleDateString(),className:l.textField,onChange:function(e){var t=e.target.value,a=new Date(t);isNaN(a.getTime())?s(!0):(s(!1),n(a))},error:i,InputLabelProps:{shrink:!0}})}var W=n(235),H={label:"News sentiment",fill:!1,lineTension:.1,backgroundColor:"rgba(75,192,192,0.4)",borderColor:"rgba(75,192,192,1)",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",pointBorderColor:"rgba(75,192,192,1)",pointBackgroundColor:"#fff",pointBorderWidth:1,pointHoverRadius:5,pointHoverBackgroundColor:"rgba(75,192,192,1)",pointHoverBorderColor:"rgba(220,220,220,1)",pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:10},_=function(){var e=Object(a.useState)(null),t=Object(d.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(null),i=Object(d.a)(o,2),f=i[0],p=i[1],b=Object(a.useState)({labels:[],datasets:[]}),h=Object(d.a)(b,2),g=h[0],w=h[1],E=Object(a.useState)(new Date),j=Object(d.a)(E,2),O=j[0],S=j[1],x=function(e,t){var n=Object(a.useState)(e),r=Object(d.a)(n,2),c=r[0],o=r[1];return Object(a.useEffect)((function(){var n=setTimeout((function(){o(e)}),t);return function(){return clearTimeout(n)}}),[e,t]),c}(O,1e3);Object(a.useEffect)((function(){Object(u.a)(s.a.mark((function e(){var t,n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(x);case 2:t=e.sent,n=t.map((function(e){return e.date.toLocaleDateString()})),a=t.map((function(e){return e.sentiment.score})),c(t),w({labels:n,datasets:[Object(l.a)({},H,{data:a})]});case 7:case"end":return e.stop()}}),e)})))()}),[x]);var D=n&&null!==f?n[f]:null;return r.a.createElement("div",{className:"App App-header"},r.a.createElement("header",null,"Financial News"),n?r.a.createElement("div",{className:"graph"},r.a.createElement(L,{selectedDate:x,updateDate:S}),r.a.createElement(m.a,{data:g,getElementAtEvent:function(e){return function(e){if(0!==e.length){var t=e[0]._index;p(t)}}(e)}})):r.a.createElement(W.a,{className:"loader"}),r.a.createElement("div",{className:"table"},r.a.createElement(R,{result:D})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(_,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},85:function(e,t,n){e.exports=n(188)},90:function(e,t,n){}},[[85,1,2]]]);
//# sourceMappingURL=main.5ba1709e.chunk.js.map